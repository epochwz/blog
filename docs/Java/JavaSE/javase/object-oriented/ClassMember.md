# 类的成员

## 初始化块

### 类初始化块

**性质**：在类的初始化阶段执行类的显式初始化，一旦类初始化完成，类初始化块将永远不会再次获得执行的机会

### 实例初始化块

**性质**：在类的实例化阶段执行类的显式初始化，每次调用构造器创建类的实例时都会被执行一次

- 实例初始化块通常用于执行无需接收参数的通用初始化代码，以便让重载的构造器复用
- 实际上编译后的 Java 类并不存在所谓的实例初始化块，而是将实例初始化块的代码复制到每个构造器中

## 构造器

> ! 如果一个类声明了构造器（无论是否是无参构造器），则系统不会自动添加无参构造器，否则系统会默认为其添加一个无参构造器

**类的实例化过程**：当使用 new 关键字调用构造器创建类的实例时，在执行构造器的执行体之前，系统会为该对象分配内存空间并执行默认初始化，此时该对象就已经产生了，只是该对象暂时还无法被外部程序访问，而只能在构造器中通过 `this` 进行访问。默认初始化完成之后，就会执行构造器中的显式初始化代码，并将该对象（的引用地址）返回，然后赋值给一个引用类型变量，从而使外部程序能够通过这个引用变量访问到该对象

- 声明对象 `Object obj;`：在栈内存中开辟空间，初始化变量
- 实例化对象 `obj = new Object();`：在堆内存中开辟内存空间，创建对象，并将新产生的对象的内存地址赋值给栈变量

## 变量

### 变量作用域

- 成员变量
  - 类变量：作为类的一个成员，从类的准备阶段开始存在，直到系统完全销毁这个类
  - 实例变量：作为实例的一个成员，在该类实例化时开始存在，直到系统完全销毁该实例
- 局部变量
  - 代码块局部变量：代码块内定义的变量，从定义的地方生效，到该代码块结束时失效
  - 方法体局部变量：方法体内定义的变量，从定义的地方生效，到该方法结束时失效
  - 方法形参局部变量：方法签名中定义的变量，在整个方法内有效，到该方法结束时失效

### 变量初始化

**成员变量**：系统会对成员变量进行默认初始化，因此成员变量无需显式初始化，可以直接使用

- 默认初始化：只要定义了类 / 实例变量，系统就会在类初始化 / 类实例化时为其分配内存空间并赋予默认初始值

**局部变量**：系统不会对局部变量进行默认初始化，因此局部变量需要显式初始化，否则无法使用

- 显式初始化：只有在程序中显式地给局部变量赋予初始值，系统才会为其分配内存空间并赋予指定的初始值
- 形参初始化：当类 / 实例调用方法时，系统会在该方法栈区内为形参分配内存空间，并将实参赋值给形参变量，完成形参局部变量的初始化

### 常量初始化

**成员常量**：系统会对成员常量进行默认初始化，因此成员常量 `声明后` 必须由程序员显式初始化，否则成员常量就没有存在的意义了

- 类成员常量：必须且只能在 `声明时` 或 `类初始化块中` 指定初始值
- 实例常量：必须且只能在 `声明时` 或 `实例初始化块中` 或 `构造器中` 指定初始值

**局部常量**：系统不会对局部常量进行默认初始化，所以局部常量 `使用前` 必须由程序员显式初始化，如果不使用，也可以不初始化

- 方法局部常量、代码块局部常量：可以 `声明并赋值` 或 `先声明，后赋值` 或 `只声明，不赋值，不使用`
- 形参局部常量：由调用方法时传入的实参来完成常量初始化，因此形参局部常量（在方法体内）不能再次赋值。

## 方法

### 方法的参数传递机制

**值传递**：将实际参数值的副本传入方法内，而参数本身不受任何影响

- **基本数据类型**：传递给形参的是实参的值的副本，因此实参本身不受影响
- **引用数据类型**：传递给形参的是实参的值的副本，但此时实参的值是对象的引用，因此形参和实参这两个栈内存变量实际上都指向了堆内存中相同的对象，所以在方法中能够通过形参改变该对象的值，从而影响实参

### 形参个数可变的方法

**定义**：可以根据需要传入不同个数的参数的方法

- 个数可变的形参只能处于形参列表的最后，因此一个方法只能有一个长度可变的形参
- 个数可变的形参会被当成一个数组，在方法中通过数组的方式访问传入的多个参数
- 调用形参个数可变的方法时可传入多个参数，也可以直接传入一个数组
- 示例：`public void test(String prefix,String...strs){}`

### 方法重载

**定义**：在同一个类中定义多个名字相同，形参列表不同的方法，称为 **方法重载**

**确定一个方法唯一性的三要素**：与返回值类型、修饰符等无关

- 调用者：类 / 对象
- 方法名：方法的标识
- 形参列表：参数个数、参数顺序、参数数据类型

> ! 若重载的方法中有形参可变的方法，则优先匹配参数个数确定的方法，最后匹配形参个数可变的方法

## final

**final** 用于修饰类、方法、变量等类的成员，表示类的成员一经初始化之后就不可改变

| 类的成员 | 作用                                    |
|:--------|:----------------------------------------|
| 类       | 无法被继承                              |
| 方法     | 无法被重写，可以被重载                   |
| 变量     | 一旦获得了初始值之后就不可改变（再次赋值） |
