# 数组(Array)

数组不仅仅是一种编程语言中的数据类型，还是一种最基础的数据结构

数组是一种线性表数据结构，它用一组连续的内存空间，存储一组具有相同类型的数据。

- **线性表：**数据像一条线一样相邻排列，数据只有前后两个方向，数据之间有且仅有前驱/后继的关系。链表、队列、栈都是线性表结构
  - **非线性表：**树、图、堆等，数据之间不是简单的前后关系
- **连续的内存空间**
- **相同的数据类型**

数组支持通过下标进行**随机访问**：数组是一块连续的内存空间，假如变量的首地址是address，那么访问下表为i的元素，可以直接通过`address+i*type_size` 算出该元素的内存地址

注意：**随机访问**并不是**查找**，而是通过数组下标访问；因此数组的查找时间复杂度并不是O(1)

数组为了保持**数据在内存中连续**这个特性，在插入和删除元素的时候，需要移动其他元素,效率较低

复杂度分析

- 随机访问：O(1)
- 查找：T(n)=(1+2+...+n)/n=(n+1)/2=O(n)
- 插入：T(n)=(0+1+2+...+n)/(1+n)=n/2=O(n)
- 删除：T(n)=(0+1+2+...+n-1)/n=(n-1)/2=O(n)
- 修改（下标）：O(1)

插入小技巧：如果数组元素无需保持顺序，直接将插入位置的元素放到数组元素的最后，然后将新元素直接插入，可以避免移动大量数据；快速排序中使用了这个思想

删除小技巧：仅仅将被删除元素进行标记，而不立刻删除，等到数组存储空间不够时再一起删除；JVM标记清除垃圾回收算法的核心思想

什么时候使用数组

1. 如果特别关注性能，或者希望使用基本数据类型，可以选用数组；因为 ArrayList 无法存储基本数据类型，Auto Boxing/Unboxing 有一定的性能消耗
2. 如果可以预知数据规模的大小，且操作简单，可以直接使用数组
3. 使用多维数据结构时，多维数组比容器直观

为什么数组下标要从0开始编号？

1. 从数组的内存模型看，“下标”更确切的说法应该是“偏移”。a[0]就是相对于数组首地址偏移了0个位置，a[n]就是偏移了n个位置，所以计算a[n]的内存地址可以使用公式：`address+i*type_size`；如果从1开始编号，公式变成：`address+(i-1)*type_size`，CPU需要多做一次减法，而这种大量使用的基础数据类型，性能优化应该做到极致
2. 历史原因