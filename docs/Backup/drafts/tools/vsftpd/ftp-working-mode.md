# FTP 的工作模式

- 更详细的介绍可以参考[这篇博客]
- 主动式 (PORT)
  1. 建立命令链路：客户端向服务器的 FTP 端口 (默认是 21) 发送连接请求，服务器接受连接，建立一条命令链路。
  2. 建立数据链路：当需要传送数据时，客户端打开 xxx 端口，并使用 PORT xxx 命令通知服务器；然后服务器使用 20 端口向客户端的 xxx 端口发送连接请求，从而建立一条数据链路来传输数据
- 被动式 (PASV)
  1. 建立命令链路：客户端向服务器的 FTP 端口 (默认是 21) 发送连接请求，服务器接受连接，建立一条命令链路。
  2. 建立数据链路：当需要传送数据时，客户端使用 PASV 命令通知服务器需要传输数据，且使用的是被动模式；服务器收到后打开 xxx 端口，通过命令链路通知客户端，客户端向服务器的 xxx 端口发送连接请求，从而建立一条数据链路来传输数据
- 总结：主动和被动是相对于服务端来讲的，且只在数据传输阶段需要区分。
  - 主动就是客户端开放端口并使用 PORT 命令通知服务端，服务端主动连接客户端
  - 被动则是客户端发起数据传输命令 PASV，服务端收到通知后开放端口，并告知客户端，然后被动的等待客户端来连接

[这篇博客]: https://blog.csdn.net/jingzi123456789/article/details/83409572