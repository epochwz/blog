---
author: s3kj-mwy
email: s3kj.mwy@gmail.com
blog: http://blog.s3kj.xin
GitHub: https://github.com/s3kj-mwy

date: 2017-12-02 00:27:20
title: 进击的博客(壹) | 网站是怎么跑起来的？
tags: [Blog,Basic]
categories: Blog
---
> 本文状态：持续、频繁更新
> 
> 本文主要讲一些网站部署(计算机网络)的相关理论知识，以便诸位吃瓜群众对网站的来龙去脉有一些基本概念
> 
> 不想看理论知识的可以直接进入下一篇博客，不影响操作

__静态博客是什么？__
> 全部由 HTML+CSS 组成的网站，称为静态网站；这样的博客网站称为静态博客

__我怎样让别人访问到我的服务器？__
> 世界互联网上的每台服务器被 __公网 IP 地址__ 唯一的标记着，所以别人可以通过你提供的 IP 来访问你的服务器

__我的 IP 地址是怎么来的？__
> 世界上有个神秘的机构，叫做__互联网名称与数字地址分配机构(ICANN)__，它负责规划并分配 __公网 IP 地址__ ，并将其授权给服务器提供商，当你向服务器提供商购买服务器时，会分配到对应的 IP 地址

__IP 地址太难记了怎么办？__
> 我们可以给 IP 地址起个好听的名字，比如说baidu.com,这就是__域名(domain)__
> 
> 如果每个人乱起名字，那么势必引起混乱，所以另一个神秘机构__域名分配组织(ISO)__出现了，它制定了域名空间结构，将 IP-Domain 存放到 __域名服务器__ 上，并对外提供__域名解析服务__,称为__域名解析系统(Domain Name System,DNS)__



根域(.)(全球13个)
顶级域
    组织域(com,edu.org.net.gov,mil)
    国家/地区域(cn,hk,jp,uk)
二级域(baidu,google,taobao)
主机名(www,blog,)

__我自己起域名和 IP 地址怎么关联起来？__
> 权威机构将所有 IP 及其对应的域名收集起来，存放到 __域名服务器__ 上，


__我们是怎么访问到一台服务器上的服务的？__
> 

__我们是如何访问网络上的资源的？__
> 通过__统一资源定位符(Uniform Resource Locator,URL)__访问网络上的资源,通俗称为__网址__

__URL是标识网络上的资源的？__
> 网址的写法：协议类型://主机名.二级域名.顶级域名/文件路径/文件名
> Standard URL: Protocal://hostname.
> Example: http://www.baidu.com
> URL 标准格式：协议类型：//服务器地址:端口/资源文件路径/文件名?查询#片段ID



先上一波枯燥的网络相关名词解释！
>
协议类型:[//[访问资源需要的凭证信息@]服务器地址[:端口号]][/资源层级UNIX文件路径]文件名[?查询][#片段ID]
 (Protocol+IP+Port+filePath/fileName)

### 我们是怎么通过浏览器访问到一个网站页面的？

1. 在浏览器上输入网址baidu.com
2. 浏览器默认使用超文本传输协议将其拼接成完整的网址http://www.baidu.com
3. 浏览器进行域名解析
    - 静态解析：查询本地 hosts 文件，失败则进行动态查询
    - 动态查询：向本地域名服务器发起查询，如果最终找不到该域名对应的 IP ，则返回404错误页面
4. 浏览器使用查询到的 IP 拼接出完整的统一资源定位符
   - 默认 Port=80，filePath/fileName=index.html
5. 浏览器使用 URL 向目标服务器发起请求
5. 服务器上会有一个Web服务器(Nginx,Tomcat),监听着固定的域名和端口
6. 根据 URL 请求的文件返回数据(json,html)



> __域名解析：__在浏览器上输入域名时，浏览器会到 DNS 上查询该域名对应的 IP

### DNS

DNS 查询过程
客户机(www.baidu.com)->本地 hosts 文件
客户机(www.baidu.com)->本地域名服务器
本地域名服务器->根域名服务器(com)
本地域名服务器->顶级域名服务器(baidu.com)
本地域名服务器->二级域名服务器(www.baidu.com)
本地域名服务器(www.baidu.com)->客户机
客户机(www.baidu.com)->Web 服务器

DNS查询类型
递归查询：返回结果要么是查询失败，要么是正确的 IP-Domain 映射关系
    通常是客户机向本地域名服务器查询，允许本地域名服务器向另外的DNS服务器发出查询，并将最终查询结果返回给客户机
迭代查询：服务器收到一次查询则返回一次结果，返回结果是最优结果(其他DNS服务器的地址)，而不必是精确的 IP-Domain 映射结果



完整域名(主机名+二级域+顶级域)：www.baidu.com
完整网址(Protocal://domain/filePath/fileName)：http://www.baidu.com/index.html
完整URL(Protocal://IP:Port/filePath/fileName)<http://14.215.177.39:80/index.html

### 名词解释
__约定俗成的规则：__大多数网页内容是超文本传输协议文件(默认80端口,HTTP协议)

# 附录

__常见协议端口__

|     协议类型     | 英文缩写 | 端口号 |
| :--------------- | :------- | :----- |
| 文件传输协议     | HTTP     | 80     |
| 超文本传输协议   | FTP      | 20/21  |
| 安全 shell 协议  | SSH      | 22     |
| 远程登录协议：   | Telnet   | 23     |
| 简单邮件传输协议 | SMTP     | 25     |
| 域名系统         | DNS      | 53     |
| 邮局协议3代      | POP3     | 110    |

__怎样使用 Nginx 搭建一个静态网站？__
> 静态网站其实就是服务器上的一个文件目录，里面全是 HTML+CSS 文件。
> 
> Nginx 通过配置文件，监听特定的域名和端口，从而将请求解析到指定的网站目录
> 
> 因此搭建一个静态网站，需要 __配置域名解析__ +　__配置 Nginx 服务__

__配置域名解析：__使得在浏览器中输入域名时能够访问到服务器
1. 真实的域名解析(通常在服务器提供商提供的域名解析列表中配置)
2. 虚拟的域名解析(配置`/etc/hosts`内容,即hosts翻墙原理)
    ```
    # sample
    127.0.0.1 domain
    # example
    127.0.0.1 image.s3kj.xin
    ```

更新