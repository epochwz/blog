# 其他知识

## 正则表达式

**使用正则表达式**

* 定义正则表达式字符串
* 将正则表达式字符串编译成Pattern对象(Pattern对象是正则表达式编译后在内存中的表示形式)
* 使用Pattern对象匹配某字符串，匹配的结果集保存在新创建的Matcher对象中，并返回该Matcher对象的引用
* 使用Matcher对象操作匹配的结果集

**示例：**从大段文字中查找电话号码

```java
    // 使用字符串模拟从网络上得到的网页源码
    String str = "我想求购一本《疯狂Java讲义》，尽快联系我13500006666"
        + "交朋友，电话号码是13611125565"
        + "出售二手电脑，联系方式15899903312";
    // 1. 定义正则表达式字符串：匹配13X和15X段的手机号
    String regexStr="((13\\d)|(15\\d))\\d{8}";
    // 2. 将regexStr编译成Pattern对象
    Pattern p=Pattern.compile(regexStr);
    // 3. 使用p对象执行字符串的匹配，匹配的结果集保存在新创建的Matcher对象中，并返回该对象的引用
    Matcher m=p.matcher(str);
    // 4. 使用m对象操作匹配的结果集
    while(m.find()){
        System.out.println(m.group());
    }
```

## 回调函数

```java
package jwz;

interface Teachable{
    void work();
}
public class Programmer{
    private String name;
    //Programmer类的两个构造器
    public Programmer(){}
    public Programmer(String name){
        this.name = name;
    }
    //此处省略了name的setter和getter方法
    public void setName(String name){
        this.name = name;
    }
    public String getName(){
        return this.name;
    }
    public void work(){
        System.out.println(name + "在灯下认真敲键盘...");
    }
}
```

```java
package jwz;

public class TeachableProgrammer extends Programmer{
    public TeachableProgrammer(){}
    public TeachableProgrammer(String name){
        super(name);
    }
    //教学工作依然由TeachableProgrammer类定义
    private void teach(){
        System.out.println(getName() + "教师在讲台上讲解...");
    }
    private class Closure implements Teachable{
        // 非静态内部类回调外部类实现work方法，非静态内部类引用的作用仅仅是向客户类提供一个回调外部类的途径
        public void work(){
            teach();
        }
    }
    //返回一个非静态内部类引用，允许外部类通过该非静态内部类引用来回调外部类的方法
    public Teachable getCallbackReference(){
        return new Closure();
    }
}
```

```java
package jwz;

public class TeachableProgrammerTest{
    public static void main(String[] args){
        TeachableProgrammer tp = new TeachableProgrammer("李刚");
        //直接调用TeachableProgrammer类从Programmer类继承到的work方法
        tp.work();
        //表面上调用的是Closure的work方法，实际上是回调TeachableProgrammer的teach方法
        tp.getCallbackReference().work();
    }
}
```