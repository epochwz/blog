## 17.2.1 使用InetAddress
InetAddress类代表IP地址，子类Inet4Address/Inet6Address代表IPv4/IPv6.

InetAddress类没有构造器，只提供静态方法用于获取InetAddress对象.

```java
package jwz;

import java.net.*;

// InetAddress类测试
public class InetAddressTest{
    public static void main(String[] args)throws Exception{
        // 根据主机名来获取对应的InetAddress实例
        InetAddress ip = InetAddress.getByName("www.crazyit.org");
        // 判断是否可达
        System.out.println("crazyit是否可达：" + ip.isReachable(2000));
        // 获取该InetAddress实例的IP字符串
        System.out.println(ip.getHostAddress());
        // 根据原始IP地址来获取对应的InetAddress实例
        InetAddress local = InetAddress.getByAddress(new byte[]{127,0,0,1});
        System.out.println("本机是否可达：" + local.isReachable(5000));
        // 获取该InetAddress实例对应的全限定域名
        System.out.println(local.getCanonicalHostName());
    }
}
```

## 17.2.2 使用URLDecoder和URLEncoder
用于完成普通字符串和application/x-www-form-urlencoded MIME 字符串之间的相互转换。

当URL地址里包含非西欧字符的字符串时，系统会将其转换成特殊字符串。而编程中涉及的普通字符串和特殊字符串之间的转换由URLEncoder和URLDecoder完成。

转换规则:每个中文字符占两个字节，每个字节可以转换成两个十六进制的数字[%XX%XX]。当然，采用不同字符集时，每个中文字符对应的字节数并不完全相同，所以使用时需要指定字符集。
```java
package jwz;

import java.net.*;

// URLDecoder/URLEncoder
public class URLDecoderTest{
    public static void main(String[] args) throws Exception{
        // 将特殊字符串转换成普通字符串
        String keyWord = URLDecoder.decode("%B7%E8%BF%F1Android%BD%B2%D2%E5", "GBK");
        System.out.println(keyWord);
        // 将普通字符串转换成特殊字符串
        String urlStr = URLEncoder.encode("疯狂Android讲义" , "UTF-8");
        System.out.println(urlStr);
    }
}
```

## 17.2.3 URL、URLConnection、URLPermission
URL对象代表统一资源定位器，是指向互联网资源的指针。

URL由协议名、主机、端口和资源组成:`protocol://host:port/resourceNmae`,如`http://www.crazyit.org/index.php`

URL对象提供的方法：
- URLConnection openConnection():返回一个URLConnection对象，代表了与URL所应用的远程对象的连接
- InputStream openStream():打开与此URL的连接，并返回一个用于读取该URL资源的InputStream，可以方便的读取远程资源，甚至实现多线程下载。

实现多线程下载的步骤：
1. 创建URL对象
2. 获取指定URL对象所指向资源的大小
3. 在本地磁盘创建一个与网络资源具有相同大小的空文件
4. 计算每个线程应该下载网络资源的哪个部分
5. 依次创建、启动多个线程俩下载网络资源的指定部分
实现断点下载:额外增加一个配置文件，记录每个线程已经下载到哪个字节，当网络断开后再次开始下载时，每个线程根据配置文件里记录的位置向后下载即可。
RandomAccessFile实现多线程断点下载工具：
1. 建立两个文件：一个是与被下载文件相同大小的空文件，一个是记录文件指针位置的配置文件。
2. 下载工具启动多条线程启动输入流来读取网络数据，并将其写入空文件。
3. 每隔一段时间，记录文件指针的文件就分别记录每个RandomAccessFile当前文件的指针位置。
4. 网络断开后再次下载时，每个RandomAceessFile根据记录的指针位置继续向下读写数据。

URLPermission类用于管理HttpURLConnection的权限问题，如果在HttpURLConnection安装了安全管理器，通过该对象打开连接时就需要先获得权限。

创建一个和URL的连接，并发送请求、读取该URL引用的资源的步骤：
1. 通过调用URL对象的openConnection()方法来创建URLConnection对象
2. 设置URLConnection的参数和普通请求属性
3. 若只是发送GET方式请求，则使用connect()方法建立和远程资源的实际连接即可；若需要发送POST请求，则需要获取URLConnection实例对应的输出流来发送请求参数
4. 远程资源变为可用，程序可访问远程资源的头字段或通过输入流来读取远程资源的数据。

如果既要使用输入流读取URLConnection响应的内容，又要使用输出流发送请求参数，则一定要先使用输出流，再使用输入流。