## 13.2.1 数据库连接池
通过DriverManager获得的Connection，一个Connnection对应一个数据库物理连接，每次操作都打开一个物理连接，使用后关闭该连接，频繁的打开/关闭造成系统性能低下。

数据库连接池:当程序启动后，系统主动建立足够的Connection，组成一个连接池。每次程序请求连接时，无须重新打开连接，而是从连接池中取出已有的连接来使用，使用后不关闭该连接，而是直接归还给连接池，从而大大提高程序的运行效率。

资源池：对于资源共享情况的通用设计模式,用于解决资源的频繁请求/释放造成的性能下降。

数据库连接池是Connection对象的工厂，常用参数:
- 数据库的初始连接数
- 连接池的最大连接数
- 连接池的最小连接数
- 连接池每次增加的容量

JDBC数据库连接池:javax.sql.DataSource表示，DataSorce是一个接口，也称数据源[连接池+连接池管理],由商用服务器或开源组织提供实现。

## 13.2.2 DBCP数据源
Apache软件基金组织下的开源连接池实现，依赖该组织下另一个开源系统common-pool。

数据库连接池既可以由程序独立使用，也可以和服务器整合使用[Tomcat使用DBCP数据源实现其数据库连接池]

使用该连接池实现，需要添加两个jar文件:
- commons-dbcp.jar：连接池的实现
- commons-pool.jar：连接池实现的依赖库
- [传送门:DBCP下载][]

使用步骤示例:
```java
// 1. 定义并初始化连接池对象
BasicDataSource ds=new BasicDataSource();
// 2. 设置连接池的Connection基本参数
ds.setDriverClassName(driver);
ds.setUrl(url);
ds.setUsername(user);
ds.setPassword(pass);
// 3. 设置连接池的初始连接数
ds.setInitialSize(5);
// 4. 设置连接池最多的活动连接数
ds.setMaxActive(20);
// 5. 设置连接池最少的空闲连接数
ds.setMinIdle(2);
// 6. 获取数据库连接
Connection conn=ds.getConnection();
// 7. 释放该数据库连接，归还连接池，而非关闭其与数据库的物理连接
conn.close()
```


## 13.2.3 C3P0数据源
C3P0连接池可以自动清理不再使用的Connection，还可以自动清理Statement和ResultSet，Hibernate推荐使用该连接池。

使用C3P0数据源需要添加两个jar文件：
- c3p0-0.9.5.2.jar
- mchange-commons-java-0.2.11.jar
- [传送门:C3P0下载][]

数据库连接池是产生Connection对象的工厂，整个应用程序只需要一个数据源即可,因此连接池对象通常作为类变量，在程序启动时进行初始化

[传送门:DBCP下载]:http://commons.apache.org/proper/commons-dbcp/download_dbcp.cgi "传送门:DBCP下载"
[传送门:C3P0下载]:http://sourceforge.net/projects/c3p0/ "传送门:C3P0下载"