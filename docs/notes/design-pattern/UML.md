# UML

## 定义

统一建模语言 (Unified Modeling Language,UML)：非专利的第三代建模和规约语言

- UML 是一种开放的方法，用于说明、可视化 `如何构建和编写一个正在开发的面向对象的、软件密集系统的制品 (软件开发过程中产生的各种资料，如模型、流程图、源代码、测试用例等等)`
- UML 展示了一系列最佳工程实践，而且这些最佳实践在对大规模的复杂系统进行建模方面 (尤其是在软件架构层次) 已经被验证有效

## 分类

UML2.2 定义了如下 14 种图示

- 结构式图形：强调系统式的建模
  - 静态图：**类图**、对象图、包图
  - 实现图：组件图、部署图
  - 剖面图
  - 复合结构图
- 行为式图形：强调系统模型中的触发事件
  - 活动图
  - 状态图
  - **用例图**
- 交互式图形：强调系统模型中的资料流程 (是行为式图形的子集)
  - 通信图
  - 交互概述图
  - **时序图**
  - 时间图

## 类图

类图 (Class Diagram)：用于表示类、接口、实例等之间相互的静态关系，通常包含权限、属性、方法等元素

UML 类之间的关系

- 继承和实现
  - 继承：实现类继承父类，是一种 `is a`  的关系
  - 实现：实现类实现接口
- 依赖和关联
  - 依赖：表示一种使用关系，一个类需要借助另一个类来实现功能 (通常是作为方法参数或返回值)
  - 关联：表示一种关联关系，一个类对象和另一个类的对象有关联 (通常是作为属性)
- 组合和聚合
  - 聚合：群体和个体的关系，两者拥有独立的生命周期，是一种弱关系 (群体 has a 个体)
  - 组合：整体和局部的关系，两者拥有相同的生命周期，是一种强关系 (整体 contains a 局部)

UML 类图关系表达

- 空心箭头：实线是继承，虚线是实现
- 普通箭头：实线是关联，虚线是依赖
- 菱形箭头：实心是组合，空心是聚合
- 箭头方向：从子类指向父类，从实现类指向接口，从整体指向局部
  - **解释**：只有知道对方的信息才能够指向对方
  - **示例**：定义子类时需要通过 `extends` 关键字指定父类，可见子类一定知道父类的定义，但父类并不知道子类的定义

组合关系中的数字表达及含义：假设有类 A、B，数字 n 标记在 A 类，则表示系统中的某一时刻，B 实例可以组合 n 个 A 实例

| 数字   | 含义           |
|:-------|:--------------|
| `0..1` | 0 / 1 个实例  |
| `0..*` | 0 / n 个实例  |
| `1..1` | 1     个实例  |
| `1   ` | 只能有一个实例 |
| `1..*` | 至少有一个实例 |

![uml-class-diagram-class](/docs/images/notes/design-pattern/uml-class-diagram-class.png)
![uml-class-diagram-demo](/docs/images/notes/design-pattern/uml-class-diagram-demo.png)

## 时序图

时序图 (Sequence Diagram)：显示对象之间如何按时间顺序进行交互的图示

**主要建模元素**

- 对象 (Actor)
- 生命线 (Lifeline)
- 控制焦点 (Focus of control)
- 消息 (Message)

**时序图的示例**

![sequence-diagram-demo](/docs/images/notes/design-pattern/uml-sequence-diagram-demo.png)