# UML

## 定义

统一建模语言 (Unified Modeling Language,UML)：非专利的第三代建模和规约语言

## 特点

UML 是一种开放的方法，用于说明、可视化、构建和编写一个正在开发的面向对象的、软件密集系统的制品

UML 展示了一系列最佳工程实践，这些最佳实践在对大规模、复杂系统进行建模方面、特别是在软件架构层次已经被验证有效

## 分类

UML2.2 定义了 14 种图示

- 结构式图形：强调的是系统式的建模
  - 静态图：类图、对象图、包图
  - 实现图：组件图、部署图
  - 剖面图
  - 复合结构图
- 行为式图形：强调的是系统模型中的触发事件
  - 活动图
  - 状态图
  - 用例图
- 交互式图形：强调的是系统模型中的资料流程 (行为式图形的子集)
  - 通信图
  - 交互概述图
  - 时序图
  - 时间图

## 类图

类图 (Class Diagram)：用于表示类、接口、实例等之间相互的静态关系

虽然叫做类图，但是包括了权限、属性、方法等元素

### 记忆技巧

- UML 箭头方向：从子类指向父类
  - 定义子类时需要通过 extends 关键字指定父类
  - 子类一定知道父类定义，但父类并不知道子类定义
  - 只有知道对方的信息才能够指向对方，所以箭头方向应该是子类指向父类
- 空心箭头：实线是继承 (is a)，虚线是实现 (has a)
- 普通箭头：实线是关联，虚线是依赖
  - 依赖：表示一种使用关系，一个类需要借助另一个类来实现功能 (一般是作为方法参数或返回值)
  - 关联：表示一个类对象和另一个类的对象有关联 (通常是作为属性)
- 空心菱形是聚合，实心菱形是组合
  - 聚合：整体和局部的关系，两者拥有独立的生命周期，是一种 has a 的弱关系
  - 组合：整体和局部的关系，两者拥有相同的生命周期，是一种 contains a 的强关系

组合关系中的数字表达及含义，假设有 A 类和 B 类，数字标记在 A 类，表示系统中的某一时刻，B 可以与 n 个 A 实例相关

- 0..1: 0 / 1 个实例
- 0..*: 0 / n 个实例
- 1..1: 1     个实例
- 1   : 只能有一个实例
- 1..*: 至少有一个实例

![uml-class-diagram-demo](/docs/images/notes/design-pattern/uml-class-diagram-demo.png)

## 时序图

时序图 (Sequence Diagram)：显示对象之间交互的图，这些对象是按时间顺序排列的

时序图的建模元素主要有

- 对象 (Actor)
- 生命线 (Lifeline)
- 控制焦点 (Focus of control)
- 消息 (Message)

![sequence-diagram-demo](/docs/images/notes/design-pattern/uml-sequence-diagram-demo.png)