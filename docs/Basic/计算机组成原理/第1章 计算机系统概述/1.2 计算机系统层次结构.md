# 1.2.1 计算机系统的组成
计算机系统
1. 硬件系统：有形的物理设备，计算机系统中实际物理装置的总称
2. 软件系统：硬件上运行的程序和相关的数据及文档

计算机系统性能的好坏很大程度由软件的效率和作用来表征，而软件性能的发挥又离不开硬件支持。

某一功能既可以用软件实现，也可以用硬件实现，称为软硬件在逻辑上是等效的

设计计算机系统时，要进行软硬件的功能分配：使用较为频繁且硬件实现的成本理想，则使用硬件可以提高效率；使用软件可以提高灵活性但效率较低。

# 1.2.2 计算机硬件的组成
## 早期的冯诺依曼机
冯诺依曼在研究EDVAC机时提出"存储程序"的概念，奠定了现代计算机的基本结构，以此概念为基础的计算机统称冯诺依曼机
- 存储程序：指将指令以代码形式事先输入到计算机主存储器中，然后按其在存储器中的首地址执行程序的第一条指令，以后就按该程序的规定顺序执行直至程序结束。

冯诺依曼机的特点：
1. 硬件系统:运算器、存储器、控制器、输入设备、输出设备
2. 指令和数据以同等地位存于存储器中，可按地址寻访
3. 指令和数据均用二进制代码表示
4. 指令=操作码OP+地址码Ad，操作码表示操作的性质，地址码表示操作数在存储器中的位置
5. 指令在存储器中按顺序存放。指令通常顺序执行，特定条件下根据运算结果/设定条件改变执行属性
6. 早期以运算器为中心，IO设备通过运算器与存储器传送数据

典型的冯诺依曼结构：

![典型的冯诺依曼计算机结构][]

## 现代计算机的组织结构
1. 传统冯诺依曼计算机：微处理器出现前，运算器和控制器分离，且存储器容量小，故以运算器为中心，其它部件均通过运算器完成信息的传递。如上图
    - 工作方式：控制流驱动方式
    - 缺点:大量IO设备的速度跟不上CPU速度
2. 现代计算机以存储器为中心，使IO操作绕过CPU，直接在IO设备和存储器之间完成，提高系统的整体运行效率。
    ![以存储器为中心的计算机结构][]

## 计算机的功能部件
1. 输入设备：将程序和数据以机器能识别和接受的信息形式输入到计算机
    - 常用输入设备：键盘、鼠标、扫描仪、摄像机
2. 输出设备：将计算机处理的结果以人类能接受的形式或其它系统要求的信息形式输出。
    - 常用输出设备：显示器、打印机
    - IO设备是计算机和外界联系的桥梁，是计算机不可缺少的组成部分
3. 存储器：计算机的存储部件，用于存放程序和数据。
    - 主存储器[主存/内存储器]：CPU能够直接访问，由许多存储单元组成
        - 存储单元：包含若干存储元件[可存储一位二进制代码0/1]，可存储一串二进制代码，称为存储字
        - 存储字：其位数称为存储字长[字节(8bit)的偶数倍]
        - 工作方式：按存储单元的地址进行存取，称为按地址存取方式[相联存储器按内容访问]
        - 基本组成
            
            ![主存储器逻辑图][]
            1. 存储体：存放二进制信息
            2. 地址存储器MAR：存放访存地址，经过地址译码后找到所选的存储单元
                - 用于寻址，其位数对应存储单元的个数[如MAR为10位，则有2^10=1024个存储单元，记为1K]。MAR长度和PC长度相等
            3. 数据寄存器MDR：主存和其它部件的中介机构，用于暂存要从存储器中读写的信息
                - MDR的位数和存储字长相等[字节的二次幂整数倍]
            4. 时序控制逻辑：产生存储器操作所需的各种时序信号。
            
            现代计算机中，MAR/MDR/高速缓存cache虽属于存储器，但位于CPU中
    - 辅助存储器[辅存/外存储器]：帮助主存记忆更多信息，辅存的信息必须调入主存后才能被CPU访问
4. 运算器：计算机的执行部件，用于对数据进行加工处理，完成算术运算/逻辑运算
    - 算术逻辑单元ALU：运算器的核心
    - 若干通用寄存器：暂存操作数和中间结果
        - 累加器ACC
        - 乘商寄存器MQ
        - 操作数寄存器X
        - 变址寄存器IX
        - 基址寄存器BR
        - 前三个必须有
    - 程序状态寄存器PSW：保留各类运算指令/测试指令的结果的各类状态信息，以表征系统运行状态
5. 控制器：计算机的指挥中心，协调各部件进行工作。
    - 程序计数器PC：存放当前欲执行的指令的地址[自动+1形成下一条指令的地址]，与MAR有一条直接通路
    - 指令寄存器IR：存放当前欲执行指令[来自MDR]。指令中的操作码OP(IR)送至CU，用以分析指令并发出各种微操作命令序列，而地址码Ad(IR)送往MAR来取操作数
    - 控制单元CU

# 计算机软件的分类
按功能分类：
1. 系统软件：基础软件，作为系统资源提供给用户使用。操作系统OS、数据库管理系统DBMS，语言处理程序、分布式软件系统、网络软件系统、标准库程序、服务性程序
    - DBMS是位于用户和操作系统间的一层数据管理软件，是系统软件；
    - 数据库系统DBS指计算机引入数据库后的系统
    - DBS=数据库+DBMS+DBA+应用系统
2. 应用软件：为解决某个应用领域的各类问题而编制的程序。科学计算类程序、工程设计类程序、数据统计与处理程序

# 计算机的工作过程
工作步骤
1. 把程序和数据装入主存
2. 从程序的起始地址运行程序
3. 用程序的首地址从存储器取出指令1，译码、执行，完成该指令功能后计算下一条指令的地址
4. 用新的指令地址读取下一条指令，如此循环取指、译码、执行直到程序结束。

取数指令：将指令地址码指示的存储单元中的操作数取出送至运算器的ACC中
1. 取指令：PC->MAR->M->MDR->IR
2. 分析指令：OP(IR)->CU
3. 执行指令：Ad(IR0)->MAR->M->MDR->ACC
4. 计算下一条指令：(PC)+1->PC

# 计算机系统的多级层次结构
![计算机系统的多级层次结构][]

操作系统层由操作系统程序[机器指令+广义指令]实现
- 广义指令：扩展机器功能设置的，由操作系统定义和解释的软件指令


[典型的冯诺依曼计算机结构]:http://note.youdao.com/yws/public/resource/21de821faff3efb27011dc7a10ba9fee/xmlnote/ADBCCDB5C075400C90E008F26DA83C24/8340
[以存储器为中心的计算机结构]:http://note.youdao.com/yws/public/resource/21de821faff3efb27011dc7a10ba9fee/xmlnote/E6D4C37455A74B6997502C64DC11B313/8358
[主存储器逻辑图]:http://note.youdao.com/yws/public/resource/21de821faff3efb27011dc7a10ba9fee/xmlnote/326E3A9271444D8C93FC224FFBF9B4D5/8433
[计算机系统的多级层次结构]:http://note.youdao.com/yws/public/resource/21de821faff3efb27011dc7a10ba9fee/xmlnote/BF9E94C8673E40408FEF81A4F8195A99/8522